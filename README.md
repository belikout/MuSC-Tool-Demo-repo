# MuSC Tool Demo
A Tool Demo for Ethereum Smart Contract  Mutation Test.
## Development Environment and Configuration
```Java(1.8) ```and ```Node.js``` Environment are necessary to run this project.  
### Configuration
First, if you haven't install [Truffle](https://github.com/trufflesuite/truffle), you need to install it in your device.
```
$ npm install -g truffle
```
Next, run ```$ npm install``` under [node](https://github.com/belikout/MuSC-Tool-Demo-repo/tree/master/node) folder to get dependencies installed.  
### Start up
Follow the steps below to run this tool:  
1. Start nodejs side service.  
Run [GenASTServer.js](https://github.com/belikout/MuSC-Tool-Demo-repo/blob/master/node/GenASTServer.js) under [node](https://github.com/belikout/MuSC-Tool-Demo-repo/tree/master/node) folder
to start node side service.  
(This service generates AST from Solidity file, mainly using tool [solidity-parser-antlr](https://github.com/federicobond/solidity-parser-antlr))
2. Start demo website on localhost.  
This tool's main body ```mutestdemo``` is written by Spring Boot, running  [MutestdemoApplication.java](https://github.com/belikout/MuSC-Tool-Demo-repo/blob/master/mutestdemo/src/main/java/cn/edu/nju/mutestdemo/MutestdemoApplication.java)
to start the local server for tool. Then access tool website via ```localhost:8080/musc```  
## Tool Usage Process
### 1.Test the original truffle test project
Enter the path of Truffle Project to be tested in the input box above, and click "Test Project" to check the project of the path. Only when the path is correct and the test cases are all passed, can the mutants be generated by clicking "Generate" button below.
![avatar](https://github.com/belikout/MuSC-Tool-Demo-repo/blob/master/mutestdemo/src/main/resources/static/imgs/1.png)
### 2.Generate Muatnts
Choose the Solidity files you want to generate mutants for, and the mutantion operators you want to use, clicking the "Generate" button to generate mutants.  
You can find the truffle project example used for test at [AirSwap](https://github.com/airswap/contracts)
![avatar](https://github.com/belikout/MuSC-Tool-Demo-repo/blob/master/mutestdemo/src/main/resources/static/imgs/1-1.png)
You can check mutants on the mutants viewer panel.
![avatar](https://github.com/belikout/MuSC-Tool-Demo-repo/blob/master/mutestdemo/src/main/resources/static/imgs/2.png)
### 3.Run mutation test
After generating mutants, you can jump to test case runner tab to start mutation test.
![avatar](https://github.com/belikout/MuSC-Tool-Demo-repo/blob/master/mutestdemo/src/main/resources/static/imgs/3.png)
You can choose to export test report after test, and you will get a report like below.
![avatar](https://github.com/belikout/MuSC-Tool-Demo-repo/blob/master/mutestdemo/src/main/resources/static/imgs/4-1.png)
![avatar](https://github.com/belikout/MuSC-Tool-Demo-repo/blob/master/mutestdemo/src/main/resources/static/imgs/4-2.png)
You can get the full tool usage introduction in the video available at https://youtu.be/rHRX8NY4X_E
## Mutation Operators Explanation
### Traditional Operators
| Operator | Description |
| ------ | ------ |
| AOR | Arithmetic Operator Replacement |
| AOI | Arithmetic Operator Insertion |
| ROR | Relational Operator Replacement |
| COR | Conditional Operator Replacement |
| LOR | Logical Operator Replacement |
| ASR | Assignment Short-cut Operator Replacement |
| SDL | Statement Deletion |
| RVR | Return Value Replacement |
| CSC | Condition Statement Change |

### ESC Aimed Operators
|Type| Operator | Description |
| ------ | ------ | ------ |
|Keyword| FSC | Function State Keyword Chang |
|Keyword| FVC | Function Visibility Keyword Chang |
|Keyword| DLR | Data Location Keyword Replacement |
|Keyword| VTR | Variable Type Keyword Replacement |
|Keyword| PKD | Payable Keyword Deletion |
|Keyword| DKD | Delete Keyword Deletion |
|Global Variable and Function| GVC | Global Variable Change |
|Global Variable and Function| MFR | Mathematical  Functions  Replacement |
|Global Variable and Function| AVR | Address  Variable  Replacement |
|Variable Unit| EUR | Ether Unit Replacement |
|Variable Unit| TUR | Time Unit Replacement |
|Error Handling| RSD | Require Statement Deletion |
|Error Handling| RSC | Require Statement Change |
|Error Handling| ASD | Assert Statement Deletion |
|Error Handling| ASC | Assert Statement Change |
![avatar](https://github.com/belikout/MuSC-Tool-Demo-repo/blob/master/mutestdemo/src/main/resources/static/imgs/1.png)
